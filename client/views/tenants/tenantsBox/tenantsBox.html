<template name="tenantsBox">
    <div class="row">
        <div class="col-md-3 col-lg-3">
            {{> tenantsFilters }}
        </div>

        <div class="col-md-8 col-lg-8">
            {{>tenantsListSearch}}
        </div>

        <div class="col-md-9 col-lg-9">
            {{#if isSearching}}
            searching
            {{else}}
            {{> tenantsList }}
            {{/if}}
        </div>
    </div>
</template>

<template name="tenantsFilters">
    <div class="filter">
        <a class="filter-toggle" data-toggle="collapse" href="#filter-body">
            <strong><i class="fa fa-filter"></i></strong>
        </a>
        <div class="filter-list" id="filter-body">

            {{> filter_inactive showInactive=query.inactives}}

            {{> filter_createdDate selectedLimit=query.selectedLimit}}

            {{> filter_tags tags=query.tags}}
        </div>
    </div>
</template>

<template name="tenantsList">
    <div>
        {{>fastPagination name='tenants'}}
        {{#if isLoading}}
        <div style="height: 280px;">
        </div>
        {{else}}
        <div class="fade-in">
            {{#each tenants}}
            {{> tenantsListItem }}
            {{else}}
            {{#if info.isFiltering.value }}
            <div class="v-wrapper">
                <div class="v-wrapper-cell text-center text-muted" style="height: 678px;">
                    <i class="icon-connection-1 text-large"></i>
                    <h1>
                        No records Found
                    </h1>
                </div>
            </div>
            {{/if}}
            {{/each}}
        </div>
        {{/if}}
    </div>
</template>

<template name="tenantsListItem">
    <div class="table-item magic">
        <div class="row ">
            <div class="col-sm-4">
                <div class="table-item-cell">
                    <div class="table-item-cell-container">
                        <div class="table-item-title">
                            <strong class="text text-muted" style="font-size: 25px; color: '#A29E9E'">
                                <a href="/tenant/{{_id}}">
                                    {{name}}
                                </a>
                            </strong>
                            {{_id}}
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-sm-6">
                <div class="table-item-cell">
                    <div class="table-item-cell-container text-muted">
                        {{> tenantInformation }}
                    </div>
                </div>
            </div>

            <div class="col-sm-2">
                <div class="table-item-cell">
                    <div class="table-item-cell-container date">
                        {{#formatted_date date=dateCreated format='fromNow'}}
                        <span>{{value}}</span><br>
                        {{/formatted_date}}
                        {{#if searchKey }}
                        <i class="glyphicon glyphicon-search"></i>
                        {{searchKey}}
                        {{/if}}
                    </div>
                </div>
            </div>
        </div>
    </div>
</template>

<template name="tenantInformation">
    {{#if firstUserId}}
        <i class="icon-map-marker-1"></i>
        {{displayUserName firstUserId}}
    {{/if}}

    <i class="icon-calendar-2"></i>
    <small>
        {{#formattedDate value=dateCreated}}
        {{date}}
        {{/formattedDate}}
    </small>
    <br/>


    {{displayUserName firstUserId}}
</template>

<template name="tenantsListSearch">
    <div class="actions-head search-list">
        <div class="row">
            <div class="col-sm-8 col-md-8 col-lg-8">
                <div class="input-group">
                    {{#objectProperty property=searchString}}
                    <input type="text" class="form-control" placeholder="Search tenants" value="{{value}}">
                    {{/objectProperty}}

                    <span class="input-group-btn">
                        <button class="btn btn-primary" type="button">
                            <i class="fa fa-search"></i>
                        </button>
                    </span>
                </div>
            </div><!-- /.col-lg-5 -->
            <div class="pull-right">
                {{> tenantListSort}}
            </div>
        </div><!-- /.row -->
    </div>
</template>


<template name="tenantListSort">
    <div class="btn-group">
        <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
            Sort
            {{#with selectedSort}}
            <strong>{{displayName}}</strong>
            {{#if isAscSort .}}
            <i class="fa fa-sort-amount-asc"> </i>
            {{else}}
            <i class="fa fa-sort-amount-desc"> </i>
            {{/if}}
            {{/with}}
            <span class="caret"></span>
        </button>
        <ul class="dropdown-menu" role="menu">
            {{#each sortFields}}
            <li>
                <a class="sort-field">
                    {{displayName}}
                    {{#if isFieldSelected .}}
                    {{#if isAscSort .}}
                    <i class="fa fa-sort-amount-asc"> </i>
                    {{else}}
                    <i class="fa fa-sort-amount-desc"> </i>
                    {{/if}}
                    {{/if}}
                </a>
            </li>
            {{/each}}
        </ul>
    </div>
</template>