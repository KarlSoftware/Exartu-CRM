<template name="jobRates">
    <div class="box">
        <div class="box-header-2">
            <a class="btn-action tip-top editRate pointer" data-original-title="Add Job Rate" title="Edit" style="color: {{colorJobRateEdit}}"><i class="fa fa-pencil"></i></a>
            <div class="box-title">
                Job Rates
            </div>
        </div>

        <div class="box-body">
            {{#if editMode}}
                <!-- Edit mode -->
                {{#if rates}}
                    <!-- Edit the existing job rates -->
                    <div class="row">
                        <div class="col-xs-12 col-md-8">
                            <ul class="list-3 stripped ">
                                {{#each rates}}
                                <li class="row list-3-item">
                                    <!-- Rate type -->
                                    <div class="col-xs-12 col-md-4">
                                        <label class="col-xs-4">Type:</label>
                                        <div class="col-xs-8">
                                            {{#with getType type}} {{displayName}} {{/with}}
                                            <button class="btn btn-xs btn-default removeRate"><i class="fa fa-times"></i></button>
                                        </div>
                                    </div>
                                    <!-- Bill amount -->
                                    <div class="col-xs-12 col-md-4">
                                        <label class="col-xs-4">Bill:</label>
                                        <div class="col-xs-8">
                                            <input type="number" step="any" class="form-control billRateInput" value="{{bill}}">
                                        </div>
                                    </div>
                                    <!-- Pay amount -->
                                    <div class="col-xs-12 col-md-4">
                                        <label class="col-xs-4">Pay:</label>
                                        <div class="col-xs-8">
                                            <input type="number" step="any" class="form-control payRateInput" value="{{pay}}">
                                        </div>
                                    </div>
                                </li>
                                {{/each}}
                            </ul>

                            <!-- Save & cancel buttons -->
                            <div class="row" style="margin: 10px 0">
                                <div class="pull-right">
                                    <span class="btn btn-default cancelButtonRates">Cancel</span>
                                    <span class="btn btn-info saveButtonRates">Save</span>
                                </div>
                            </div>
                        </div>
                    </div>
                {{/if}}

            {{else}}
                <!-- Display mode -->
                {{#if rates}}
                    <!-- Display the rates -->
                    <div class="row">
                        <div class="col-xs-12 col-md-8">
                            <table class="table table-striped">
                                <thead>
                                <tr>
                                    <th class="col-xs-12 col-md-4">Type</th>
                                    <th class="col-xs-12 col-md-2">Bill</th>
                                    <th class="col-xs-12 col-md-2">Pay</th>
                                </tr>
                                </thead>

                                <tbody>
                                {{#each rates}}
                                <tr>
                                    <!-- Rate type -->
                                    <td>
                                        {{#with getType type}}
                                        {{displayName}}
                                        {{/with}}
                                    </td>
                                    <!-- Bill amount -->
                                    <td><span class="billRateInput">{{round bill}}</span></td>
                                    <!-- Pay amount -->
                                    <td>{{round pay}}</td>
                                </tr>
                                {{/each}}
                                </tbody>
                            </table>
                        </div>
                    </div>

                {{else}}
                    <!-- Empty list -->
                    <div class="box-v-msg">
                        <div class="box-v-msg-content">
                            <i class="icon-money"></i>
                            <p><a href="#" class="editRate">Add a Rate</a></p>
                        </div><!-- /.box-v-msg-content -->
                    </div>
                {{/if}}
            {{/if}}

            <!-- New Job Rate -->
            <div class="row margin-top-15">
                <div class="col-xs-12 col-md-8">
                    <div class="well">
                        <div class="row">
                            {{#with newRate}}
                            <!-- Rate type -->
                            <div class="col-xs-12 col-md-4">
                                <label class="col-xs-3">Type</label>
                                <div class="col-xs-9">
                                    <select class="form-control newRateType">
                                        <option value="">--select--</option>
                                        {{#each getAvailableType}}
                                        <option value="{{_id}}">{{displayName}}</option>
                                        {{/each}}
                                    </select>
                                </div>
                            </div>
                            <!-- Bill amount -->
                            <div class="col-xs-12 col-md-3">
                                <label class="col-xs-3">Bill</label>
                                <div class="col-xs-9">
                                    <input type="number" step="any" class="form-control billRateInput" value="{{bill}}">
                                </div>
                            </div>
                            <!-- Pay amount -->
                            <div class="col-xs-12 col-md-3">
                                <label class="col-xs-3">Pay</label>
                                <div class="col-xs-9">
                                    <input type="number" step="any" class="form-control payRateInput" value="{{pay}}">
                                </div>
                            </div>
                            <!-- Add button -->
                            <div class="col-xs-1">
                                <span class="btn btn-primary addRate"><i class="fa fa-plus"></i></span>
                            </div>
                            {{/with}}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</template>


