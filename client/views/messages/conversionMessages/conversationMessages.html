<template name="conversationMessages">
    <div class="col-sm-6 col-md-8 col-lg-8" name="conversationMessagesVM">
        <div class="messages-right-part">
            <!-- ko if: $data.isConversationSelected -->
            
            <div class="messages-top-head">
                <div data-bind="with: helper.getUserInformation($root.userDestination)">
                    <!-- ko if: $data.ready -->
                    <!-- ko if: $data.username -->
                    <h3><a href="#"><strong data-bind="text: username"></strong></a></h3>
                    <!-- /ko -->
                    <!-- ko if: !$data.username && $data.email -->
                    <h3><a href="#"><strong data-bind="text: email"></strong></a></h3>
                    <!-- /ko -->
                    <!-- /ko -->
                </div>
            </div>
            <div class="box-content-2 conversation">
               <ul class="conversation-msgs" data-bind="foreach: messages">
                    <li class="clearfix">
                        <div data-bind="with: helper.getUserInformation($data.from())">
                            <!-- ko if: $data.ready -->
                            <span class="msg-pic">
                                <img height="50px" width="50px" data-bind="attr: {src: $data.picture? $data.picture : 'assets/user-photo-placeholder.jpg'}">
                            </span>
                            <!-- ko if: $data.username -->
                            <span class="msg-author" data-bind="text: username"></span>
                            <!-- /ko -->
                            <!-- ko if: !$data.username && $data.email -->
                            <span class="msg-author" data-bind="text: email"></span>
                            <!-- /ko -->
                            <!-- /ko -->
                        </div>
                        <div class="msg-content">
                            <p data-bind="text: content"></p>
                        </div>
                        <span class="msg-date" data-bind="text: moment(createdAt()).format('ll')"></span>
                    </li>
                </ul>
            </div>
            <!-- /.box-content-2 -->
            <div class="conversation-form">
                <textarea class="form-control bottom-10" rows="3" placeholder="Write a message" data-bind="value: newMessage"></textarea>
                <button class="btn btn-primary btn-block btn-lg" data-bind="click: function() { addMessage();}">Send Message</button>
            </div>
            <!-- /.conversation-form -->
            
            <!-- /ko -->
            
            <!-- ko if: !$data.isConversationSelected -->
             <div class="messages-top-head">
                <h3><a>Select a conversation</a></h3>
            </div>    
            <!-- /ko -->
        </div>
        <!-- /.messages-right-part -->
    </div>
</template>