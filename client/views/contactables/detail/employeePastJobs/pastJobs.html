<template name="employeePastJobs">
    <div class="col-md-6">
        {{> employeePastJobAdd}}
    </div>
    <div class="record hidden">
        <div class="col-md-6">
            {{> employeePastJobsList}}
        </div>


    </div>
</template>

<template name="employeePastJobAdd">
    <div class="record-add row">
        <div class="add-box-head col-xs-12 col-md-12 col-lg-3">
            <div class="add-item-icon"><i class="icon-profile-business-man"></i></div>
            <h2>Past Jobs</h2>
        </div>

        <div class="add-box-content col-xs-12 col-md-12 col-lg-9">
            {{#autoForm id="AddPastJobRecord" schema="PastJobSchema"}}
                <fieldset>
                    {{> afQuickField name='company'}}
                    {{> afQuickField name='position'}}
                    {{> afQuickField name='supervisor'}}
                    {{> afQuickField name='location'}}
                    {{> afQuickField name='duties' rows=2}}
                    {{> afQuickField name='ok2Contact'}}
                    {{> afQuickField name='payRate'}}
                    {{> afQuickField name='reasonForLeaving' rows=2}}

                    <div class="row">
                        <!-- Start Date -->
                        <div class="form-group col-lg-6 {{#if afFieldIsInvalid name='start'}}has-error{{/if}}">
                            {{> afB3DatePicker name='start' format="MM yyyy" minViewMode="months" startView="decade" }}
                        </div>

                        <!-- End Date -->
                        <div class="form-group col-lg-6 {{#if afFieldIsInvalid name='end'}}has-error{{/if}}">
                            <div class="{{endDateClass}}">
                                {{> afB3DatePicker name='end' format="MM yyyy" minViewMode="months" startView="decade" }}
                            </div>

                            <!-- To present -->
                            <div class="checkbox">
                                <label>
                                    <input class="editable toPresent" type="checkbox"> To present
                                </label>
                            </div>
                        </div>
                    </div>
                </fieldset>

                <button class="btn btn-success pull-right"> Save </button>
            {{/autoForm}}
        </div>
    </div>
</template>

<template name="employeePastJobsList">
    <ul class="record-list list-3 stripped has-thumb">
        {{#each items}}
            {{> employeePastJobItem}}
        {{/each}}
    </ul>
</template>

<template name="employeePastJobItem">
    <li class="record-record list-3-item">
        <div class="list-thumb"><i class="icon-briefcase"></i></div>
        <div class="list-3-content list-magic">
            <div class="list-3-content-wrap">
                {{#with getCtx}}
                    {{#if isEditing}}
                        {{> employeePastJobEditItem doc=pastJobRecord}}
                    {{else}}
                        <div class="list-3-actions">
                            <a class="editPastJobRecord pointer"><i class="fa fa-edit"></i> Details</a>
                            <span class="bullet-spacer">Â·</span>
                            <a class="deletePastJobRecord pointer"><i class="fa fa-trash-o"></i> Delete</a>
                        </div>
                        <div class="list-3-item-meta-top">
                            {{pastJobRecord.company}}
                            {{#if pastJobRecord.supervisor}}
                                - Supervised by {{pastJobRecord.supervisor}}
                            {{/if}}
                        </div>
                        <h4 class="list-3-item-title">{{pastJobRecord.position}}</h4>
                        <small class="text-muted">
                            {{pastJobRecord.location}}
                            <i class="fa fa-calendar"></i>
                            Start: {{formattedDate pastJobRecord.start "MMMM YYYY"}} -
                            {{#if pastJobRecord.end}}
                                End: {{formattedDate pastJobRecord.end "MMMM YYYY"}}
                            {{else}}
                                to present
                            {{/if}}
                        </small>
                    {{/if}}
                {{/with}}
            </div>
        </div>
    </li>
</template>

<template name="employeePastJobEditItem">
    {{#autoForm id=formId schema="PastJobSchema" doc=doc}}
        <fieldset>
            {{> afQuickField name='company'}}
            {{> afQuickField name='position'}}
            {{> afQuickField name='supervisor'}}
            {{> afQuickField name='location'}}
            {{> afQuickField name='duties' rows=2}}
            {{> afQuickField name='ok2Contact'}}
            {{> afQuickField name='payRate'}}
            {{> afQuickField name='reasonForLeaving' rows=2}}

            <div class="row">
                <!-- Start Date -->
                <div class="form-group col-lg-6 {{#if afFieldIsInvalid name='start'}}has-error{{/if}}">
                    {{> afB3DatePicker name='start' value=doc.start format="MM yyyy" minViewMode="months" startView="decade" }}
                </div>

                <div class="form-group col-xs-6 {{#if afFieldIsInvalid name='end'}}has-error{{/if}}">
                    <!-- End Date -->
                    <div class="{{endDateClass}}">
                        {{> afB3DatePicker name='end' value=doc.end format="MM yyyy" minViewMode="months" startView="decade" }}
                    </div>

                    <!-- To present -->
                    <div class="checkbox">
                        <label>
                            <input class="editable toPresent" type="checkbox" {{checked}}> To present
                        </label>
                    </div>
                </div>
            </div>
        </fieldset>

        <div class="pull-right">
            <span class="btn btn-default cancelPastJobRecordChanges"> Cancel </span>
            <button class="btn btn-success"> Save </button>
        </div>
    {{/autoForm}}
</template>