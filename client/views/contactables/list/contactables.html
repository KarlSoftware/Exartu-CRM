<template name="contactables">
    <div class="contactables-page">
        <div id="content">
            {{#with information}}
                <div id="content-header" class="mini">
                    <h1>
                            {{#objectProperty property=contactablesCount }}
                                <strong> {{value}} </strong>
                            {{/objectProperty}}

                            {{#objectProperty property=objType}}
                                {{#if value}}
                                    <span> {{value}} </span>
                                {{else}}
                                    record(s)
                                {{/if}}
                            {{/objectProperty}}


                    </h1>
                </div>
                <div id="breadcrumb">
                    <a href="#" title="Go to Home" class="tip-bottom">Home</a>
                    <a href="#" class="current">
                        {{#objectProperty property=objType }}
                        <strong> {{value}} </strong>
                        {{/objectProperty}}</a>
                </div>
            {{/with}}

            <div class="container-fluid">
                <div class="row">
                    <div class="col-md-4 col-md-push-8 col-lg-push-8 col-lg-4">
                        <sidebar>
                            {{> contactablesFilters }}
                        </sidebar>
                    </div>
                    <!-- /.col-lg-4 -->

                    <div class="col-md-8 col-md-pull-4 col-lg-8 col-lg-pull-4">
                        {{> contactablesList }}
                        {{#infinityScroll cb=showMore}} {{/infinityScroll}}
                    </div>
                </div>
                <!--/ko-->
            </div>
        </div>
    </div>
</template>

<template name="contactablesFilters">
    <!--<div class="box-2">-->
        <!--<h4 class="bottom-20"><strong>Filters</strong></h4>-->
        <!--<form role="form">-->
            <!--<div class="panel-group bottom-20">-->
                <!--<div class="panel panel-default">-->
                    <!--<div class="panel-heading">-->
                        <!--<h4 class="panel-title">-->
                            <!--<a>-->
                                <!--<strong>Mode</strong>-->
                            <!--</a>-->
                        <!--</h4>-->
                    <!--</div>-->
                    <!--<div class="panel-body">-->
                        <!--<div class="checkbox">-->
                            <!--<label>-->
                                <!--{{#objectProperty property=query.inactives}}-->
                                    <!--<input type="checkbox" value="{{value}}"> Include inactives-->
                                <!--{{/objectProperty}}-->
                            <!--</label>-->
                        <!--</div>-->
                        <!--<div class="checkbox">-->
                            <!--<label>-->
                                <!--{{#objectProperty property=query.onlyRecents}}-->
                                    <!--<input type="checkbox" value="{{value}}"> Only recent-->
                                <!--{{/objectProperty}}-->
                            <!--</label>-->
                            <!--<span><i class="icon-question-mark" title="Shows only the contacts that have been recently added. Select the timespan."></i></span>-->
                            <!--<div class="pull-right">-->
                                <!--<button type="button" class="{{recentOptionClass recentOptions.day}}" id="recent-day">day</button>-->
                                <!--<button type="button" class="{{recentOptionClass recentOptions.week}}" id="recent-week">week</button>-->
                                <!--<button type="button" class="{{recentOptionClass recentOptions.month}}" id="recent-month">month</button>-->
                                <!--<button type="button" class="{{recentOptionClass recentOptions.year}}" id="recent-year">year</button>-->
                            <!--</div>-->
                        <!--</div>-->
                    <!--</div>-->
                <!--</div>-->
                <!--<div class="panel panel-default">-->
                    <!--<div class="panel-heading">-->
                        <!--<h4 class="panel-title">-->
                            <!--<strong>Tags</strong>-->
                        <!--</h4>-->
                    <!--</div>-->
                    <!--<div class="panel-body">-->
                        <!--{{#objectProperty property=tags}}-->
                        <!--<button type="button" class="tag btn btn-xs btn-primary">-->
                            <!--<span >{{value}}</span>-->
                            <!--<i class="remove-tag fa fa-times"></i>-->
                        <!--</button>-->
                        <!--{{/objectProperty}}-->
                        <!--<div class="input-group">-->
                            <!--<input id="new-tag" type="text" class="form-control" placeholder="Enter tags here...">-->
                            <!--<span class="input-group-btn">-->
                              <!--<button class="add-tag btn btn-success" type="button">Add</button>-->
                            <!--</span>-->
                        <!--</div>&lt;!&ndash; /input-group &ndash;&gt;-->
                    <!--</div>-->
                <!--</div>-->
            <!--</div>-->
        <!--</form>-->
    <!--</div>-->
</template>

<template name="contactablesList">
    <div>
        {{> contactablesListSearch }}

        {{#each contactables}}
            {{> contactablesListItem }}
        {{else}}
            {{#if info.isFiltering.value }}
                <div class="v-wrapper">
                    <div class="v-wrapper-cell text-center text-muted" style="height: 678px;">
                        <i class="icon-connection-1 text-large"></i>
                        <h1>
                            No records Found
                        </h1>
                    </div><!-- /.v-wrapper-cell -->
                </div>
            {{else}}
                <div class="v-wrapper">
                    <div class="v-wrapper-cell text-center text-muted" style="height: 678px;">
                        <i class="icon-connection-1 text-large"></i>
                        <!--<h1>You currently have no-->
                            <!--&lt;!&ndash;ko text:name&ndash;&gt;-->
                            <!--&lt;!&ndash;/ko&ndash;&gt;-->
                        <!--</h1>-->
                        <!--&lt;!&ndash;ko if:name()=='contactable'&ndash;&gt;-->
                        <!--<p class="lead">A contactable is an Employee, Customer or Contact.</p>-->
                        <!--&lt;!&ndash; /ko &ndash;&gt;-->
                        <!--ko foreach: contactableTypes-->
                        <a href="#" data-bind="attr: { href: '/contactableAdd/'+name() }, text: 'New ' + name()"></a>
                        <span class="bullet-spacer" data-bind="visible: $index()< $parent.contactableTypes().length-1">Â·</span>
                        <!-- /ko -->
                    </div><!-- /.v-wrapper-cell -->
                </div>
            {{/if}}
        {{/each}}
    </div>
</template>

<template name="contactablesListItem">
    <div class="table-item magic">
        <div class="row ">
            <div class="col-sm-4">
                <div class="table-item-cell">
                    <div class="table-item-cell-container">
                        <div class="thumb">
                            {{#if pictureFileId }}
                                {{#with pictureUrl pictureFileId}}
                                    <a href="#">
                                        <img src="{{.}}">
                                    </a>
                                {{/with}}
                            {{else}}
                                {{#if organization }}
                                    <a href="#" style="color: #707070; font-size: 27px">
                                        <i class="icon-buildings-1" style="display: block; margin-top: 10px;"></i>
                                    </a>
                                {{/if}}
                                {{#if person }}
                                    <a href="#" style="color: #707070; font-size: 27px">
                                        <i class="icon-profile-business-man" style="display: block; margin-top: 10px;"></i>
                                    </a>
                                {{/if}}
                            {{/if}}
                        </div>
                        <div class="table-item-title">
                            <a href="/contactable/{{_id}}">{{displayName}}</a>
                            <br/>
                            <strong class="text text-muted text-small">{{displayObjType}}</strong>
                        </div>
                    </div>
                    <!-- /.table-item-cell-container -->
                </div>
                <!-- /.table-item-cell -->
            </div>
            <!-- /.col-sm-3 -->
            <div class="col-sm-6">
                <div class="table-item-cell">
                    <div class="table-item-cell-container text-muted">
                        {{#if Customer}}
                            {{> customerInformation }}
                        {{/if}}
                        {{#if Employee}}
                            {{> employeeInformation }}
                        {{/if}}
                        {{#if Contact}}
                            {{> contactInformation }}
                        {{/if}}
                    </div>
                    <!-- /.table-item-cell-container -->
                </div>
                <!-- /.table-item-cell -->
            </div>
            <!-- /.col-sm-4 -->
            <div class="col-sm-2">
                <div class="table-item-cell">
                    <div class="table-item-cell-container date">
                        {{#formatted_date date=dateCreated format='fromNow'}}
                            <span>{{value}}</span><br>
                        {{/formatted_date}}
                        {{#if searchKey }}
                            <i class="glyphicon glyphicon-search"></i>
                            {{searchKey}}
                        {{/if}}
                    </div>
                    <!-- /.table-item-cell-container -->
                </div>
                <!-- /.table-item-cell -->
            </div>
            <!-- /.col-sm-3 -->
        </div>
        <!-- /.row -->
    </div>
    <!-- /.table-item -->
</template>

<template name="customerInformation">
    {{#if location.displayName}}
        <i class="icon-map-marker-1"></i>
        {{location.displayName}}
    {{/if}}
</template>

<template name="employeeInformation">
    {{#if assignmentInfo}}
        {{#with assignmentInfo}}
            <i class="icon-briefcase" style="color: forestgreen"></i>
            Currently assigned as <strong> <a href="/job/{{job}}"> {{jobTitle}} </a></strong> {{#if customerName}} at <strong> <a href="/contactable/{{customer}}"> {{customerName}} </a></strong> {{/if}}
    {{/with}}
    {{else}}
        {{#if person}}
            <i class="icon-briefcase"></i>
            {{person.jobTitle}}
        {{/if}}
    {{/if}}
    <br/>
    {{#if location.displayName}}
        <i class="icon-map-marker-1"></i>
        {{location.displayName}}
    {{/if}}
</template>

<template name="contactInformation">
    {{#if Contact.customer}}
        <i class="icon-building-2"></i>
        <a href="/contactable/{{Contact.customer}}">
            <strong>{{Contact.customerName}}</strong>
        </a>
    {{/if}}
</template>

<template name="contactablesListSearch">
    <div class="actions-head">
        <div class="row">
            <div class="col-sm-8 col-md-12 col-lg-8">
                <!-- Single button -->
                <div class="btn-group pull-left suffix-5">
                    <button type="button" class="btn btn-success dropdown-toggle" data-toggle="dropdown">
                        <span class="fa fa-plus"></span> Add
                    </button>
                    <ul class="dropdown-menu" role="menu" data-bind="foreach: contactableTypes">
                        {{#each contactableTypes}}
                            <li><a href="/contactableAdd/{{name}}">Add {{name}}</a></li>
                        {{/each}}
                    </ul>
                </div>
                <!--{{#subscriptionPlan plans=resumeParserRestrictions }}-->
                    <a class="btn btn-success pull-left suffix-10" href="/resumeparser"><i class="fa fa-cloud-download"></i> Import</a>
                <!--{{/subscriptionPlan}}-->
                <div class="input-group">
                    {{#objectProperty property=searchString}}
                        <input type="text" class="form-control" placeholder="" value="{{value}}">
                    {{/objectProperty}}
                    <span class="input-group-btn">
                        <button class="btn btn-primary" type="button">
                            <i class="fa fa-search"></i> Search
                        </button>
                    </span>
                </div>
            </div><!-- /.col-lg-5 -->
        </div><!-- /.row -->
    </div>
</template>